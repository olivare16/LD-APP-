<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Liguita de Dominó</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0e1a2b;
      --muted:#64748b;
      --brand:#ffb34a;
      --brand-dark:#f29416;
      --ring:#f6b766;
      --ok:#16a34a;
      --danger:#ef4444;
      --shadow:0 10px 25px rgba(0,0,0,.08);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-tap-highlight-color: transparent;
    }
    .wrap{ max-width:720px; margin:0 auto; padding:16px 14px 28px; }

    /* Header */
    .top{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:10px 0 14px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .brand .logo{
      width:44px; height:44px; display:block; border-radius:12px; box-shadow: var(--shadow);
      object-fit: contain; background:#fff; /* por si el SVG tiene fondo transparente */
    }
    .title{ font-size: clamp(22px, 5vw, 34px); font-weight:800; line-height:1.1; }

    .btn{
      appearance:none; border:0; outline:0;
      background:linear-gradient(180deg, var(--brand) 0%, var(--brand-dark) 100%);
      color:#fff; font-weight:800; padding:12px 18px; border-radius:14px;
      box-shadow:0 6px 16px rgba(242,149,3,.35); cursor:pointer; transition:.15s transform ease;
      touch-action: manipulation; font-size:16px;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    /* Cards */
    .grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .card{
      background:var(--card); border-radius:var(--radius);
      padding:14px 14px; box-shadow: var(--shadow);
      border:1px solid rgba(244,149,3,.18); min-width:0;
    }
    .card h3{ margin:2px 0 6px; font-size: clamp(16px, 3.8vw, 20px); font-weight:800; letter-spacing:.2px; }
    .score{ font-size: clamp(36px, 11vw, 56px); line-height:1; font-weight:900; margin:8px 0 10px; text-align:center; }

    /* Inputs */
    .input{ display:flex; align-items:center; gap:10px; margin-top:8px; }
    input[type="number"]{
      flex:1; background:#fff; border:2px solid var(--ring); border-radius:14px;
      padding:12px 14px; font-size:18px; font-weight:700; color:var(--text); outline:none;
      transition:border-color .15s ease, box-shadow .15s ease;
    }
    input[type="number"]::placeholder{ color:#bac3cf; font-weight:600; }
    input[type="number"]:focus{ border-color:var(--brand-dark); box-shadow:0 0 0 3px rgba(244,149,3,.18); }
    input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }
    input[type="number"]{ -moz-appearance: textfield; }

    .sumar{
      margin:14px 0 12px; width:100%; padding:14px 18px; border-radius:16px;
      background:linear-gradient(180deg, var(--brand) 0%, var(--brand-dark) 100%);
      border:0; color:#fff; font-weight:900; font-size:18px; cursor:pointer;
      box-shadow:0 8px 18px rgba(242,149,3,.35); touch-action: manipulation;
    }

    /* Historial */
    .history{ background:var(--card); border-radius:var(--radius); padding:10px 10px; box-shadow: var(--shadow); border:1px solid rgba(244,149,3,.18); margin-top:12px; }
    .history h4{ margin:6px 8px 10px; font-size:18px }
    #list{ max-height: 240px; overflow:auto; }
    .row{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      padding:10px 12px; border-radius:12px; background:#fff; border:1px solid rgba(244,149,3,.25); margin:8px 0;
    }
    .row b{ font-size:15px } .row small{ color:var(--muted) }

    /* Overlay ganador */
    .overlay{ position:fixed; inset:0; z-index:10000; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; padding:20px; }
    .overlay.show{ display:flex; }
    .modal{
      width:min(520px, 96vw); background:#fff; border-radius:18px; padding:18px 16px 14px; box-shadow:var(--shadow);
      text-align:center; border:1px solid rgba(244,149,3,.25); animation: pop .18s ease-out;
    }
    @keyframes pop{ from{ transform:scale(.98); opacity:.8 } to{ transform:scale(1); opacity:1 } }
    .modal h2{ margin:6px 0 8px; font-size: clamp(22px, 6.4vw, 30px); font-weight:900; }
    .modal p{ margin:0 0 12px; color:var(--muted); }
    .modal .actions{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
    .modal .actions button{ padding:12px 16px; border-radius:14px; border:0; font-weight:800; cursor:pointer; font-size:16px; }
    .reset{ background:#fff; border:2px solid var(--ring); color:#111; }

    footer{ color:#8b97a7; text-align:center; font-size:13px; margin-top:14px }

    @media (max-width:380px){ .btn{ padding:10px 14px } }

    /* Intro / Splash (usa TU logo desde logo.svg) */
    .intro{
      position:fixed; inset:0; z-index:20000;
      background:linear-gradient(180deg,#ffffff 0%, #ffe7c2 100%);
      display:flex; align-items:center; justify-content:center;
    }
    .intro-card{ text-align:center; animation: pop .20s ease-out; }
    .intro-card img{
      width:96px; height:96px; display:block; border-radius:20px;
      box-shadow:var(--shadow); object-fit:contain; background:#fff;
      margin: 0 auto;
    }
    .intro-card h1{ margin:14px 0 6px; font-size:28px; font-weight:900; color:#0e1a2b; }
    .intro-card p{ margin:0; color:#8b97a7; font-weight:700; }
    .intro.hide{ animation:introFade .45s ease forwards; pointer-events:none; }
    @keyframes introFade{ to{ opacity:0; transform:scale(1.02); visibility:hidden; } }
  </style>
</head>
<body>

  <!-- Intro / Splash (2s y se quita sola). Pon tu archivo logo como "logo.svg" en la misma carpeta. -->
  <div class="intro" id="intro">
    <div class="intro-card">
      <img src="logo.svg" alt="LD logo" />
      <h1>Liguita de Dominó</h1>
      <p>—</p>
    </div>
  </div>

  <div class="wrap" aria-live="polite">
    <div class="top">
      <div class="brand">
        <!-- Logo del header: usa el mismo archivo -->
        <img class="logo" src="logo.svg" alt="LD logo">
        <div class="title">Liguita de Dominó</div>
      </div>
      <button id="newGame" class="btn">Nuevo Juego</button>
    </div>

    <!-- Marcadores -->
    <div class="grid" role="region" aria-label="Marcadores">
      <div class="card" id="teamA">
        <h3>Equipo 1</h3>
        <div class="score" id="scoreA">0</div>
      </div>
      <div class="card" id="teamB">
        <h3>Equipo 2</h3>
        <div class="score" id="scoreB">0</div>
      </div>
    </div>

    <!-- Entradas con teclado del dispositivo -->
    <div class="card" style="margin-top:12px">
      <div class="input">
        <input id="pointsA" type="number" inputmode="numeric" pattern="\d*" placeholder="Puntos equipo 1" min="0" />
        <input id="pointsB" type="number" inputmode="numeric" pattern="\d*" placeholder="Puntos equipo 2" min="0" />
      </div>
      <button id="add" class="sumar">Sumar mano</button>
      <div id="msg" style="color:var(--danger); font-weight:700; padding:4px 2px; display:none;">Solo un equipo puede sumar por mano.</div>
    </div>

    <!-- Historial (altura fija con scroll) -->
    <div class="history" role="region" aria-label="Historial">
      <h4>Historial</h4>
      <div id="list"></div>
    </div>

    <footer>Liguita chilling — By Manuel Olivares</footer>
  </div>

  <!-- Overlay ganador -->
  <div class="overlay" id="winOverlay" aria-modal="true" role="dialog">
    <div class="modal">
      <h2 id="winTitle">¡Equipo ganó!</h2>
      <p>Se reiniciará al cerrar la app o puedes reiniciar ahora.</p>
      <div class="actions">
        <button class="reset" id="closeOverlay">Seguir viendo</button>
        <button class="btn" id="resetNow">Reiniciar</button>
      </div>
    </div>
  </div>

<script>
(function(){
  const scoreA = document.getElementById('scoreA');
  const scoreB = document.getElementById('scoreB');
  const inA    = document.getElementById('pointsA');
  const inB    = document.getElementById('pointsB');
  const list   = document.getElementById('list');
  const msg    = document.getElementById('msg');
  const addBtn = document.getElementById('add');
  const newBtn = document.getElementById('newGame');

  const overlay = document.getElementById('winOverlay');
  const winTitle= document.getElementById('winTitle');
  document.getElementById('closeOverlay').onclick = () => overlay.classList.remove('show');
  document.getElementById('resetNow').onclick = resetAll;

  let totalA = 0, totalB = 0, hand = 0;
  const GOAL = 200;

  // --- Intro / Splash: auto-cierre en 2s, sin tap ni sessionStorage ---
  const intro = document.getElementById('intro');
  if (intro){
    setTimeout(() => {
      intro.classList.add('hide');
      setTimeout(() => { intro.style.display = 'none'; }, 460);
    }, 2000);
  }

  function render(){
    scoreA.textContent = totalA;
    scoreB.textContent = totalB;
  }

  function addRow(text, pts){
    const row = document.createElement('div');
    row.className = 'row';
    row.innerHTML = `<b>${text}</b><small>+${pts}</small>`;
    list.prepend(row);
  }

  function warn(msgText){
    msg.textContent = msgText;
    msg.style.display = 'block';
    setTimeout(()=>msg.style.display='none', 1800);
  }

  function checkWinner(){
    if (totalA >= GOAL || totalB >= GOAL){
      const winner = totalA >= GOAL ? 'Equipo 1' : 'Equipo 2';
      winTitle.textContent = `¡${winner} ganó!`;
      overlay.classList.add('show'); // bloquea interacción
      return true;
    }
    return false;
  }

  const parse = v => {
    const n = parseInt(v,10);
    return Number.isFinite(n) && n>0 ? n : 0;
  };

  function clearInputs(){ inA.value = ''; inB.value = ''; }

  function resetAll(){
    totalA = 0; totalB = 0; hand = 0; list.innerHTML = '';
    overlay.classList.remove('show');
    clearInputs(); render();
    window.scrollTo({top:0, behavior:'smooth'});
  }

  addBtn.addEventListener('click', () => {
    const a = parse(inA.value);
    const b = parse(inB.value);

    if (!a && !b){ warn('Ingresa puntos (> 0) para uno de los equipos.'); return; }
    if (a && b){ warn('Solo un equipo puede sumar por mano.'); return; }

    hand++;
    if (a){
      totalA += a;
      addRow(`Mano #${hand} · Equipo 1`, a);
    } else if (b){
      totalB += b;
      addRow(`Mano #${hand} · Equipo 2`, b);
    }

    clearInputs(); render(); checkWinner();
  });

  newBtn.addEventListener('click', resetAll);

  // Evita zoom por foco en iOS si algo quedara <16px
  [inA,inB].forEach(el => el.style.fontSize = '16px');

  // Reinicia al cerrar/salir (no persistimos nada)
  window.addEventListener('beforeunload', resetAll);
  window.addEventListener('pagehide',   resetAll);

  render();
})();
</script>
</body>
</html>